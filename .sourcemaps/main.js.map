{"version":3,"sources":["../../src/providers/sync/sync.ts","../../src/providers/voucher/voucher.ts","../../src/pages/login/login.ts","../../src/pages/scan/scan.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/model/vendor.ts","../../src/texts/global.ts","../../src/providers/login/login.ts","../../src/providers/wsse/wsse.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/texts/global_fr.ts","../../src/texts/global_en.ts","../../src/texts/global_ar.ts","../../src/environments/environment.ts","../../package.json","../../src/components/components.module.ts","../../src/components/header/header.ts","../../src/components/calculator/calculator.ts","../../src/interceptors/index-interceptors.ts","../../src/interceptors/auth-interceptor.ts","../../src/pages/products/products.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { Voucher } from '../../model/voucher';\nimport { Product } from '../../model/product';\nimport { Booklet } from '../../model/booklet';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\n@Injectable()\nexport class SyncProvider {\n\n    private products = new BehaviorSubject<Product[]>([]);\n\n    constructor(public http: HttpClient, private storage: Storage) {\n    }\n\n    URL_BMS_API: string = process.env.URL_BMS_API;\n\n    /**\n     * Sync with backend\n     * @param  vouchers\n     * @param  booklets\n     */\n    sync(vouchers: Voucher[], booklets: string[]) {\n        return new Promise((resolve, reject) => {\n            this.sendVouchers(vouchers).subscribe(() => {\n                this.sendBooklets(booklets).subscribe(() => {\n                    this.getDeactivatedBooklets().then(success => {\n                        this.getProtectedBooklets().then(success => {\n                            resolve(success);\n                        }, error => {\n                            reject(error);\n                        });\n                    }, error => {\n                        reject(error);\n                    });\n                }, error => {\n                    reject(error);\n                });\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n\n    /**\n     * Send vouchers\n     * @param  vouchers\n     */\n    sendVouchers(vouchers: Voucher[]) {\n        return this.http.post(this.URL_BMS_API + '/vouchers/scanned', vouchers);\n    }\n\n    /**\n     * Send booklets\n     * @param  booklets\n     */\n    sendBooklets(booklets: string[]) {\n        const body = {\n            bookletIds: booklets\n        };\n        return this.http.post(this.URL_BMS_API + '/deactivate-booklets', body);\n    }\n\n    /**\n     * Get deactivated booklets\n     */\n    getDeactivatedBooklets() {\n        return new Promise((resolve, reject) => {\n            this.http.get<Array<Booklet>>(this.URL_BMS_API + '/deactivated-booklets').subscribe(deactivatedBooklets => {\n                const deactivatedBookletIds = [];\n                deactivatedBooklets.forEach(booklet => {\n                    deactivatedBookletIds.push(booklet.id);\n                });\n                this.storage.set('deactivatedBooklets', deactivatedBookletIds);\n                resolve(deactivatedBooklets);\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n\n    /**\n     * Get protected booklets\n     */\n    getProtectedBooklets() {\n        return new Promise((resolve, reject) => {\n            this.http.get<Array<Booklet>>(this.URL_BMS_API + '/protected-booklets').subscribe(protectedBooklets => {\n                this.storage.set('protectedBooklets', protectedBooklets);\n                resolve(protectedBooklets);\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n\n    /**\n     * Get products from backend\n     */\n    getProductsFromApi() {\n        return new Promise((resolve, reject) => {\n            this.http.get<Array<Product>>(this.URL_BMS_API + '/products').subscribe(products => {\n                const productList = [];\n                products.forEach(product => {\n                    productList.push({\n                        id: product.id,\n                        name: product.name,\n                        unit: product.unit,\n                        image: product.image\n                    });\n                });\n                this.products.next(productList);\n                this.storage.set('products', productList);\n                resolve(products);\n            }, error => {\n                this.storage.get('products').then(products => resolve(products));\n            });\n        });\n    }\n\n    /**\n     * Get products stored in service\n     */\n    getProducts(): BehaviorSubject<Product[]> {\n        return this.products;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/sync/sync.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Voucher } from '../../model/voucher';\nimport { Storage } from '@ionic/storage';\nimport { ChosenProduct } from '../../model/chosenProduct';\n\n@Injectable()\nexport class VoucherProvider {\n\n    private price = new BehaviorSubject<number>(0);\n    private chosenProducts = new BehaviorSubject<ChosenProduct[]>([]);\n\n    constructor(public http: HttpClient, private storage: Storage) {\n    }\n\n    /**\n     * Set price\n     * @param price\n     */\n    setPrice(price: number): void {\n        this.price.next(price);\n    }\n\n    /**\n     * Get price\n     */\n    getPrice(): BehaviorSubject<number> {\n        return this.price;\n    }\n\n    /**\n     * Set chosen products\n     * @param chosenProducts\n     */\n    setChosenProducts(chosenProducts: ChosenProduct[]): void {\n        this.chosenProducts.next(chosenProducts);\n    }\n\n    /**\n     * Get chosen producs\n     */\n    getChosenProducts(): BehaviorSubject<ChosenProduct[]> {\n        return this.chosenProducts;\n    }\n\n    /**\n     * Scan vouchers\n     * @param vouchers\n     */\n    scanVouchers(vouchers: Voucher[]): void {\n        this.storage.get('vouchers').then(cacheVouchers => {\n            const alreadyStoredVouchers = cacheVouchers || [];\n            vouchers.forEach(voucher => {\n                alreadyStoredVouchers.push(voucher);\n            });\n            this.storage.set('vouchers', alreadyStoredVouchers);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/voucher/voucher.ts","import { Component, OnInit } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport { Vendor } from '../../model/vendor';\nimport { GlobalText } from '../../texts/global';\nimport { ProductsPage } from '../products/products';\nimport { LoginProvider } from '../../providers/login/login';\nimport { AlertController } from 'ionic-angular';\nimport { SyncProvider } from '../../providers/sync/sync';\nimport { environment } from '../../environments/environment';\n\n@Component({\n    selector: 'page-login',\n    templateUrl: './login.html'\n})\nexport class LoginPage implements OnInit {\n\n    public login = GlobalText.TEXTS;\n    public vendor: Vendor;\n    public loader = false;\n    public version: string = environment.VERSION;\n\n    constructor(\n        public navCtrl: NavController,\n        public loginProvider: LoginProvider,\n        private alertCtrl: AlertController,\n        private syncProvider: SyncProvider) {\n    }\n\n    /**\n     * Method executed on component creation\n     */\n    ngOnInit() {\n        this.blankUser();\n    }\n\n    /**\n     * Submit login and get necessary data\n     */\n    clickSubmit() {\n        this.loader = true;\n        this.loginProvider.login(this.vendor).then(vendor => {\n            this.syncProvider.getDeactivatedBooklets().then(booklets => {\n                this.syncProvider.getProtectedBooklets().then(booklets => {\n                    this.navCtrl.setRoot(ProductsPage);\n                }, error => {\n                    this.connectionError();\n                });\n            }, error => {\n                this.connectionError();\n            });\n        }, error => {\n            this.loader = false;\n            const alert = this.alertCtrl.create({\n                title: 'Login failed',\n                subTitle: error,\n                buttons: ['OK']\n            });\n            alert.present();\n        });\n    }\n\n    /**\n     * Display connection error alert\n     */\n    connectionError() {\n        this.loader = false;\n        const alert = this.alertCtrl.create({\n            title: 'Login failed',\n            subTitle: 'There was a connection problem, please verify your connection and try again',\n            buttons: ['OK']\n        });\n        alert.present();\n    }\n\n    /**\n     * Initialize blank user\n     */\n    blankUser() {\n        this.vendor = new Vendor();\n        this.vendor.username = '';\n        this.vendor.password = '';\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { VoucherProvider } from '../../providers/voucher/voucher';\nimport { Vendor } from '../../model/vendor';\nimport { Storage } from '@ionic/storage';\nimport { Voucher } from '../../model/voucher';\nimport { ProductsPage } from '../products/products';\nimport { ChosenProduct } from '../../model/chosenProduct';\nimport { AlertController } from 'ionic-angular';\nimport CryptoJS from 'crypto-js';\n\n@IonicPage()\n@Component({\n    selector: 'page-scan',\n    templateUrl: 'scan.html',\n})\nexport class ScanPage {\n\n    vouchers: Array<Voucher> = [];\n    vouchersTotalValue = 0;\n    price$: BehaviorSubject<number>;\n    chosenProducts$: BehaviorSubject<ChosenProduct[]>;\n    errorMessage = '';\n    successMessage = '';\n    vendor: Vendor;\n    scanDisabled = false;\n    tries: number;\n    triesMessage: string;\n    priceTooHigh = true;\n\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        private barcodeScanner: BarcodeScanner,\n        public voucherProvider: VoucherProvider,\n        private storage: Storage,\n        private alertCtrl: AlertController) {\n    }\n\n    /**\n     * Method executed on component creation\n     */\n    ngOnInit() {\n        this.price$ = this.voucherProvider.getPrice();\n        this.chosenProducts$ = this.voucherProvider.getChosenProducts();\n        this.price$.subscribe(price => {\n            // TODO: do something\n        });\n        this.chosenProducts$.subscribe(products => {\n            if (products.length <= 0) {\n                this.scanDisabled = true;\n                this.errorMessage = 'You haven\\'t selected any product, please go back to the previous page.';\n            }\n        });\n        this.storage.get('vendor').then(vendor => {\n            this.vendor = vendor;\n        });\n        this.tries = 3;\n        this.triesMessage = 'You have only three tries before your booklet deactivates.';\n    }\n\n    /**\n     * Scan voucher QR code\n     */\n    scanCode() {\n        let scannedCode = '';\n        this.barcodeScanner.scan().then(barcodeData => {\n            // scannedCode = barcodeData.text;\n            // scannedCode = scannedCode.replace(' ', '+');\n            // this.ifHasNoPasswordGetInfo(scannedCode).then(success => {\n            //     this.handleScannedCode(scannedCode, success);\n            // }, reject => {\n            //     this.successMessage = '';\n            //     this.errorMessage = reject;\n            // });\n            // all the logic can be moved in here when the scan can be tested\n        });\n        // meanwhile... (to test, the encoded password is 'coline')\n        scannedCode = 'USD10*000-004-002-007-kaFw6V2/c0w43zlRQvhVfxb VjQ='; // to delete after\n        scannedCode = scannedCode.replace(' ', '+');\n        this.ifHasNoPasswordGetInfo(scannedCode).then(success => {\n            this.handleScannedCode(scannedCode, success);\n        }, reject => {\n            this.successMessage = '';\n            this.errorMessage = reject;\n        });\n    }\n\n    /**\n     * Get voucher info if has no password\n     * @param  scannedCode\n     */\n    ifHasNoPasswordGetInfo(scannedCode: string): Promise<string[]> {\n        return new Promise((resolve, reject) => {\n            const passwords = [];\n            let bookletId = '';\n            let scannedCodeInfo = scannedCode.match(/^([A-Za-z$]+)(\\d+)\\*([\\d]..-[\\d]..-[\\d]..)-([\\da-z]+)-([\\da-zA-Z=+-\\/]+)$/i);\n            if (scannedCodeInfo !== null) {\n                passwords.push(scannedCodeInfo[5]);\n                bookletId = scannedCodeInfo[3];\n            } else {\n                scannedCodeInfo = scannedCode.match(/^([A-Za-z$\\d]+)\\*([\\d]..-[\\d]..-[\\d]..)$/i);\n                if (scannedCodeInfo !== null) {\n                    reject('You cannot scan a booklet code, you have to scan the vouchers individually.');\n                } else {\n                    scannedCodeInfo = scannedCode.match(/^([A-Za-z$]+)(\\d+)\\*([\\d]..-[\\d]..-[\\d]..)-([\\da-z]+)$/i);\n                    if (scannedCodeInfo !== null) {\n                        bookletId = scannedCodeInfo[3];\n                    } else {\n                        reject('Your code isn\\'t the right format, are you sure it is a BMS Voucher ?');\n                    }\n                }\n            }\n\n            this.storage.get('protectedBooklets').then(booklets => {\n                booklets.forEach(booklet => {\n                    if (booklet.hasOwnProperty(bookletId)) {\n                        passwords.push(booklet[bookletId]);\n                    }\n                });\n                if (passwords.length > 0) {\n                    this.tries = 3;\n                    this.triesMessage = 'You have only three tries before your booklet deactivates.';\n                    this.openPasswordModal(scannedCode, passwords, scannedCodeInfo);\n                } else {\n                    resolve(scannedCodeInfo);\n                }\n            });\n        });\n    }\n\n    /**\n     * Get booklet id from it code\n     * @param  booklet\n     */\n    getBookletIdFromCode(booklet: string): number {\n        return parseInt(booklet.split('-').pop(), 10) + 1;\n    }\n\n    /**\n     * Open password modal\n     * @param  scannedCode\n     * @param  scannedCodeInfo\n     */\n    openPasswordModal(scannedCode: string, passwords: string[], scannedCodeInfo: string[]) {\n        const alert = this.alertCtrl.create({\n            cssClass: 'wide-alert',\n            title: 'Password',\n            subTitle: 'Please enter the voucher\\'s password',\n            buttons: [\n                {\n                    text: 'Cancel',\n                    handler: () => {\n                        return;\n                    }\n                },\n                {\n                    text: 'Submit',\n                    handler: data => {\n                        this.handlePasswordSubmit(data, scannedCode, passwords, scannedCodeInfo)\n                    }\n                }\n            ],\n            inputs: [\n                {\n                    name: 'password',\n                    type: 'password',\n                    placeholder: '**********'\n                }\n            ],\n            message: this.triesMessage\n        });\n        alert.present();\n    }\n\n    /**\n     * Handle the data returned by the password modal (WARNING RECURSIVE !!)\n     * @param  data\n     * @param  scannedCode\n     * @param  scannedCodeInfo\n     * @param  passwords\n     */\n    public handlePasswordSubmit(data: any, scannedCode: string, passwords: string[], scannedCodeInfo: string[]) {\n        if (data.password && passwords.includes(this.salt(data.password))) {\n            this.handleScannedCode(scannedCode, scannedCodeInfo);\n        } else {\n            this.tries -= 1;\n            if (this.tries === 0) {\n                this.storage.get('deactivatedBooklets').then(cacheBooklets => {\n                        const alreadyStoredBooklets = cacheBooklets || [];\n                        alreadyStoredBooklets.push(this.getBookletIdFromCode(scannedCodeInfo[3]));\n                        this.storage.set('deactivatedBooklets', alreadyStoredBooklets);\n                    });\n                    this.errorMessage = 'You have exceeded your tries at password, your booklet will be deactivated';\n                    return;\n            }\n            this.triesMessage = 'You didn\\'t type the right password. You have only ' +\n                this.tries + ' tries left.';\n            this.openPasswordModal(scannedCode, passwords, scannedCodeInfo);\n        }\n    }\n\n     /**\n     * Salt password\n     * @param  password\n     */\n    public salt(password: string): string {\n        return CryptoJS.SHA1(password).toString(CryptoJS.enc.Base64);\n    }\n\n\n    /**\n     * Handle scanned voucher\n     * @param  scannedCode\n     * @param  scannedCodeInfo\n     */\n    handleScannedCode(scannedCode: string, scannedCodeInfo: string[]) {\n        if (scannedCodeInfo === null) {\n            this.errorMessage = 'Your code isn\\'t the right format, are you sure it is a BMS Voucher ?';\n        }\n        this.successMessage = '';\n        this.errorMessage = '';\n        const previousBooklet = this.vouchers.length ? this.vouchers[0].booklet : null;\n        // previousBooklet = '096-098-096'; // to delete after\n        const newBooklet = scannedCodeInfo[3];\n\n        this.storage.get('deactivatedBooklets').then(deactivatedBooklets => {\n            if (deactivatedBooklets && deactivatedBooklets.includes(this.getBookletIdFromCode(newBooklet))) {\n                this.errorMessage = 'You cannot use this booklet because it has previously been deactivated.';\n                return;\n            }\n            if (previousBooklet && previousBooklet !== newBooklet) {\n                this.openDifferentBookletModal();\n                return;\n            }\n\n            const productIds = [];\n            this.chosenProducts$.getValue().forEach(chosenPoduct => {\n                productIds.push(chosenPoduct.product.id);\n            });\n            this.vouchers.push({\n                id: parseInt(scannedCodeInfo[4], 10),\n                qrCode: scannedCode,\n                vendorId: this.vendor.id,\n                productIds: productIds,\n                price: this.price$.getValue(),\n                currency: scannedCodeInfo[1],\n                value: parseInt(scannedCodeInfo[2], 10),\n                booklet: scannedCodeInfo[3],\n                used_at: new Date()\n            });\n            const scannedCodeValue = scannedCodeInfo[2];\n            this.vouchersTotalValue += parseInt(scannedCodeValue, 10);\n\n            if (this.vouchersTotalValue >= this.price$.getValue()) {\n                if (this.vouchersTotalValue > this.price$.getValue()) {\n                    this.priceTooHigh = false;\n                }\n            }\n        });\n    }\n\n    /**\n     * Open modal warning for a voucher from a different booklet\n     */\n    async openDifferentBookletModal() {\n        const alert = this.alertCtrl.create({\n            cssClass: 'wide-alert',\n            title: 'Different booklet',\n            buttons: [\n                {\n                    text: 'Go back to the scan page',\n                    handler: () => {\n                        return;\n                    }\n                },\n                {\n                    text: 'Cancel transaction and go back to the product page',\n                    handler: data => {\n                        this.cancelTransaction();\n                    }\n                }\n            ],\n            message: 'You now are using the booklet of another beneficiary.' +\n            ' Are you sure you want to end the previous transaction and move on to a new one?' +\n            ' Your previous vouchers won\\'t be considered as used and your products list will empty.'\n        });\n        alert.present();\n    }\n\n    /**\n     * Open proceed modal\n     */\n    async openProceedModal() {\n\n        const alert = this.alertCtrl.create({\n            cssClass: 'wide-alert',\n            title: 'Proceed transaction',\n            buttons: [\n                {\n                    text: 'Go back to the scan page',\n                    handler: () => {\n                        return;\n                    }\n                },\n                {\n                    text: 'Proceed and go back to the product page',\n                    handler: data => {\n                        this.completeTransaction();\n                    }\n                }\n            ],\n            message: 'Are you sure you want to proceed with this transaction ?' +\n            ' Your vouchers will be considered as used and kept by the vendor.'\n        });\n        alert.present();\n    }\n\n    /**\n     * Open cancel modal\n     */\n    async openCancelModal() {\n\n        const alert = this.alertCtrl.create({\n            cssClass: 'wide-alert',\n            title: 'Cancel transaction',\n            buttons: [\n                {\n                    text: 'Go back to the scan page',\n                    handler: () => {\n                        return;\n                    }\n                },\n                {\n                    text: 'Cancel transaction and go back to the product page',\n                    handler: data => {\n                        this.cancelTransaction();\n                    }\n                }\n            ],\n            message: 'Are you sure you want to cancel this transaction ?' +\n            ' Your vouchers won\\'t be considered as used and your products list will empty.'\n        });\n        alert.present();\n    }\n\n    /**\n     * Complete transaction and go to products page\n     */\n    completeTransaction() {\n        this.voucherProvider.scanVouchers(this.vouchers);\n        this.navCtrl.push(ProductsPage);\n    }\n\n    /**\n     * Cancel transaction and go to products page\n     */\n    cancelTransaction() {\n        this.vouchers = [];\n        this.vouchersTotalValue = 0;\n        this.voucherProvider.setPrice(null);\n        this.voucherProvider.setChosenProducts([]);\n        this.navCtrl.push(ProductsPage);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/scan/scan.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 209;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 209\n// module chunks = 2","var map = {\n\t\"../pages/products/products.module\": [\n\t\t807,\n\t\t1\n\t],\n\t\"../pages/scan/scan.module\": [\n\t\t808,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 251;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 251\n// module chunks = 2","import { GlobalText } from '../texts/global';\n\nexport class ErrorInterface {\n    message: string;\n}\n\nexport class Vendor {\n    static __classname__ = 'Vendor';\n    /**\n\t * User id\n\t * @type {string}\n\t */\n    id = '';\n    /**\n\t * Username\n\t * @type {string}\n\t */\n    username = '';\n    /**\n\t * Plain text password\n\t * @type {string}\n\t */\n    password = '';\n    /**\n\t * Salted password\n\t * @type {string}\n\t */\n    salted_password = '';\n    /**\n\t * Name\n\t * @type {string}\n\t */\n    name = '';\n    /**\n\t * Shop\n\t * @type {string}\n\t */\n\n    shop = '';\n    /**\n\t * Address\n\t * @type {string}\n\t */\n    address = '';\n    /**\n\t * loggedIn state\n\t * @type {boolean}\n\t */\n    loggedIn = false;\n    /**\n\t * Vendor's vouchers\n\t * @type {string[]}\n\t */\n    products: string[] = [];\n    /**\n\t * Vendor's country\n\t * @type {number[]}\n\t */\n    country: string[] = undefined;\n    /**\n\t * Vendor's language\n\t * @type {string}\n\t */\n    language = '';\n\n    constructor(instance?) {\n        if (instance !== undefined) {\n            this.id = instance.id;\n            this.username = instance.username;\n            this.password = instance.password;\n            this.name = instance.name;\n            this.shop = instance.shop;\n            this.address = instance.address;\n            this.salted_password = instance.salted_password;\n            this.products = instance.products;\n            this.country = instance.country;\n            this.loggedIn = instance.loggedIn;\n            this.language = instance.language;\n        }\n    }\n\n    /**\n     * Get displayed name\n     */\n    public static getDisplayedName() {\n        return GlobalText.TEXTS.model_user;\n    }\n\n    /**\n     * Map all properties of object\n     * @param  selfinstance\n     */\n    static mapAllProperties(selfinstance): Object {\n        if (!selfinstance) {\n            return selfinstance;\n        }\n\n        const products = [];\n        selfinstance.products.forEach(product => {\n            products.push(product);\n        });\n\n        return {\n            id: selfinstance.id,\n            name: selfinstance.name,\n            username: selfinstance.username,\n            shop: selfinstance.shop,\n            salted_password: selfinstance.salted_password,\n            address: selfinstance.address,\n            products: products,\n            country: selfinstance.country\n        };\n    }\n\n    /**\n\t* Eeturn User properties name displayed\n\t*/\n    static translator(): Object {\n        return {\n            username: GlobalText.TEXTS.email,\n            password: GlobalText.TEXTS.model_user_password,\n            rights: GlobalText.TEXTS.rights,\n            projects: GlobalText.TEXTS.project,\n            country: GlobalText.TEXTS.model_countryIso3,\n        };\n    }\n\n    /**\n     * Get all countries\n     */\n    public static getAllCountries() {\n        return [\n            {\n                'id': 'KHM',\n                'name': 'Cambodia',\n            },\n            {\n                'id': 'SYR',\n                'name': 'Syria',\n            }\n        ];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/vendor.ts","import { TEXT as TEXT_FR } from \"./global_fr\";\nimport { TEXT as TEXT_EN } from \"./global_en\";\nimport { TEXT as TEXT_AR } from \"./global_ar\";\n\nexport class GlobalText {\n    static language = 'en';\n    static languages = ['en', 'fr', 'ar'];\n    static TEXTS = TEXT_EN;\n    static country;\n\n    static maxHeight = 700;\n    static maxWidthMobile = 750;\n    static maxWidthFirstRow = 1000;\n    static maxWidthSecondRow = 800;\n    static maxWidth = 750;\n\n    public static changeLanguage(language : string = this.language) {\n        GlobalText.language = language;\n\n        switch (language) {\n            case 'en':\n                GlobalText.TEXTS = TEXT_EN;\n                break;\n            case 'fr':\n                GlobalText.TEXTS = TEXT_FR;\n                break;\n            case 'ar':\n                GlobalText.TEXTS = TEXT_AR;\n                break;\n            default: GlobalText.TEXTS = TEXT_EN; \n                break;\n        }\n        this.language = language;\n        this.adaptMargin();\n    }\n\n    private static adaptMargin() {\n        const element = document.getElementsByTagName(\"mat-sidenav-content\") as HTMLCollectionOf<HTMLElement>;\n\n        if(window.innerHeight > this.maxHeight || window.innerWidth > this.maxWidth) {\n            if(this.language === 'ar') {\n                document.getElementsByTagName('html')[0].setAttribute('dir', 'rtl');\n                element[0].style.margin = \"0px 64px 0px 0px\";\n            } else {\n                document.getElementsByTagName('html')[0].setAttribute('dir', '');\n                element[0].style.margin = \"0px 0px 0px 64px\";\n            }\n        } else {\n            this.resetMenuMargin();\n        }\n    }\n\n    public static resetMenuMargin() {\n        const element = document.getElementsByTagName(\"mat-sidenav-content\") as HTMLCollectionOf<HTMLElement>;\n        element[0].style.margin = \"0px 0px 0px 0px\";\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/texts/global.ts","import { Injectable } from '@angular/core';\nimport { Vendor } from '../../model/vendor';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport * as CryptoJS from 'crypto-js';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs/Observable';\nimport { Storage } from '@ionic/storage';\nimport { SaltInterface } from '../../model/salt';\n\n\n@Injectable()\nexport class LoginProvider {\n\n    private vendor = new Vendor;\n    URL_BMS_API: string = process.env.URL_BMS_API;\n\n    constructor(public http: HttpClient, private storage: Storage) {\n    }\n\n    /**\n     * Get user salt from backend\n     * @param  username\n     */\n    requestSalt(username: string): Observable<SaltInterface> {\n        return this.http.get<SaltInterface>(this.URL_BMS_API + '/salt/' + username);\n    }\n\n    /**\n     * Log in user in backend\n     * @param  vendor\n     */\n    logUser(vendor: Vendor) {\n        return this.http.post(this.URL_BMS_API + '/login_app', vendor);\n    }\n\n    /**\n     * Login method to log vendor in app\n     * @param  vendor\n     */\n    login(vendor: Vendor) {\n        return new Promise<Vendor | string | null>((resolve, reject) => {\n            this.requestSalt(vendor.username).subscribe(salt => {\n                const getSalt = salt as SaltInterface;\n                vendor.salted_password = this.saltPassword(getSalt.salt, vendor.password);\n                delete vendor.password;\n                return this.logUser(vendor).subscribe(data => {\n                    if (data) {\n                        this.vendor = data as Vendor;\n                        this.vendor.salted_password = vendor.salted_password;\n                        this.vendor.loggedIn = true;\n                        this.storage.set('vendor', this.vendor);\n                        resolve(this.vendor);\n                    } else {\n                        reject('Bad credentials');\n                    }\n                }, error => {\n                    reject(this.handleError(error) || 'Bad credentials');\n                });\n            }, error => {\n                reject(this.handleError(error) || 'Bad credentials');\n            });\n        });\n    }\n\n    /**\n     * Salt user password\n     * @param  salt\n     * @param  password\n     */\n    saltPassword(salt: string, password: string): string {\n        const salted = password + '{' + salt + '}';\n        let digest = CryptoJS.SHA512(salted);\n\n        for (let i = 1; i < 5000; i++) {\n            digest = CryptoJS.SHA512(digest.concat(CryptoJS.enc.Utf8.parse(salted)));\n        }\n\n        const saltedPassword = CryptoJS.enc.Base64.stringify(digest);\n        return saltedPassword;\n    }\n\n    /**\n     * Handle error\n     * @param  error\n     */\n    handleError(error) {\n        if (error.error) {\n            if (typeof error.error === 'string') {\n                return error.error;\n            } else if (error.error[0]) {\n                return error.error[0];\n            } else {\n                return null;\n            }\n        } else {\n            return null;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/login/login.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Storage } from '@ionic/storage';\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class WsseProvider {\n\n    private username: string;\n    private salted: string;\n    private chrsz = 8;\n    private b64pad = '=';\n\n    constructor(public http: HttpClient, private storage: Storage) {\n    }\n\n    /**\n     * Get headers for HTTP request\n     * @param  vendor\n     */\n    getHeaderValue(vendor?) {\n        return Observable.fromPromise(this.storage.get('vendor')).pipe(\n            map(\n                result => {\n                    const cachedVendor = result;\n\n                    if (cachedVendor) {\n                        this.username = cachedVendor.user.username;\n                        this.salted = cachedVendor.salted_password;\n                    } else {\n                        this.username = vendor.user.username;\n                        this.salted = vendor.salted_password;\n                    }\n\n                    const nonce = this.generateNonce(16);\n                    const created = this.getDate(new Date());\n                    const nonce64 = this.base64encode(nonce);\n                    const digest = this.getDigest(nonce, created, this.salted);\n\n                    const header = 'UsernameToken Username=\\\"' + this.username +\n                    '\\\", PasswordDigest=\\\"' + digest +\n                    '\\\", Nonce=\\\"' + nonce64 +\n                    '\\\", Created=\\\"' + created + '\\\"';\n                    return header;\n                }\n            )\n        );\n    }\n\n    // ------------------------------------------------------------------------//\n    // ---------------------------------WSSE-----------------------------------//\n    // ------------------------------------------------------------------------//\n\n    /**\n     * Generate arbitrary number which is only used once to be sure old communications can't be reused\n     * @param  lgth\n     */\n    generateNonce(lgth) {\n        const nonceChars = '0123456789abcdef';\n        let nonce = '';\n\n        for (let i = 0; i < lgth; i++) {\n            nonce += nonceChars.charAt(Math.floor(Math.random() * nonceChars.length));\n        }\n\n        return nonce;\n    }\n\n    /**\n     * Encrypt expression\n     * @param  exp\n     * @param  lgth\n     */\n    sha1(exp, lgth) {\n        // Add padding\n        exp[lgth >> 5] |= 0x80 << (24 - lgth % 32);\n        exp[((lgth + 64 >> 9) << 4) + 15] = lgth;\n\n        const newExp = new Array(80);\n        let a = 1732584193;\n        let b = -271733879;\n        let c = -1732584194;\n        let d = 271733878;\n        let e = -1009589776;\n\n        for (let i = 0; i < exp.length; i += 16) {\n            const oldA = a;\n            const oldB = b;\n            const oldC = c;\n            const oldD = d;\n            const oldE = e;\n\n            for (let j = 0; j < 80; j++) {\n                if (j < 16) {\n                    newExp[j] = exp[i + j];\n                } else {\n                    newExp[j] = this.rol(newExp[j - 3] ^ newExp[j - 8] ^ newExp[j - 14] ^ newExp[j - 16], 1);\n                }\n                const t = this.safeAdd(\n                    this.safeAdd(this.rol(a, 5), this.sha1Ft(j, b, c, d)),\n                    this.safeAdd(this.safeAdd(e, newExp[j]), this.sha1Kt(j))\n                );\n                e = d;\n                d = c;\n                c = this.rol(b, 30);\n                b = a;\n                a = t;\n            }\n            a = this.safeAdd(a, oldA);\n            b = this.safeAdd(b, oldB);\n            c = this.safeAdd(c, oldC);\n            d = this.safeAdd(d, oldD);\n            e = this.safeAdd(e, oldE);\n        }\n\n        const sha1 = new Array(a, b, c, d, e);\n        return sha1;\n    }\n\n    /**\n     * Rotate a 32-bit number to the left\n     * @param  num\n     * @param  cnt\n     */\n    rol(num, cnt) {\n        return (num << cnt) | (num >>> (32 - cnt));\n    }\n\n    /**\n     * Add integers, wrapping at 2^32\n     * This uses 16-bit operations internally to work around bugs in some JS interpreters\n     * @param  x\n     * @param  y\n     */\n    safeAdd(x, y) {\n        const lsw = (x & 0xFFFF) + (y & 0xFFFF);\n        const msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\n        return (msw << 16) | (lsw & 0xFFFF);\n    }\n\n    /**\n     * Perform the appropriate triplet combination function for the current iteration\n     * @param  t\n     * @param  b\n     * @param  c\n     * @param  d\n     */\n    sha1Ft(t, b, c, d) {\n        if (t < 20) { return (b & c) | ((~b) & d); }\n        if (t < 40) { return b ^ c ^ d; }\n        if (t < 60) { return (b & c) | (b & d) | (c & d); }\n\n        return b ^ c ^ d;\n    }\n\n    /**\n     * Determine the appropriate additive constant for the current iteration\n     * @param  t\n     */\n    sha1Kt(t) {\n        return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 :\n            (t < 60) ? -1894007588 : -899497514;\n    }\n\n    /**\n     * Get current date in yyyy-mm-ddThh:mn:ssZ format\n     * @param  date\n     */\n    getDate(date) {\n        const yyyy = date.getUTCFullYear();\n        let mm = date.getUTCMonth() + 1;\n        let dd = date.getUTCDate();\n        let hh = date.getUTCHours();\n        let mn = date.getUTCMinutes();\n        let ss = date.getUTCSeconds();\n\n        if (mm < 10) { mm = '0' + mm; }\n        if (dd < 10) { dd = '0' + dd; }\n        if (hh < 10) { hh = '0' + hh; }\n        if (mn < 10) { mn = '0' + mn; }\n        if (ss < 10) { ss = '0' + ss; }\n\n        const newDate = yyyy + '-' + mm + '-' + dd + 'T' + hh + ':' + mn + ':' + ss + 'Z';\n\n        return newDate;\n    }\n\n    /**\n     * Encode variable\n     * @param  nonce\n     */\n    base64encode(nonce) {\n        const nonce64 = btoa(nonce);\n        return nonce64;\n    }\n\n    /**\n     * Convert an 8-bit or 16-bit string into an array of big-endian words\n     * In 8-bit function, characters >255 have their hi-byte silently ignored\n     * @param  str\n     */\n    strToBin(str) {\n        const bin = [];\n        const mask = (1 << this.chrsz) - 1;\n\n        for (let i = 0; i < str.length * this.chrsz; i += this.chrsz) {\n            bin[i >> 5] |= (str.charCodeAt(i / this.chrsz) & mask) << (24 - i % 32);\n        }\n\n        return bin;\n    }\n\n    /**\n     * Convert an array of big-endian words to a base-64 string\n     * @param  binarray\n     */\n    binTo64(binarray) {\n        const tab = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        let str = '';\n\n        for (let i = 0; i < binarray.length * 4; i += 3) {\n            const triplet = (((binarray[i >> 2] >> 8 * (3 - i % 4)) & 0xFF) << 16)\n                | (((binarray[i + 1 >> 2] >> 8 * (3 - (i + 1) % 4)) & 0xFF) << 8)\n                | ((binarray[i + 2 >> 2] >> 8 * (3 - (i + 2) % 4)) & 0xFF);\n            for (let j = 0; j < 4; j++) {\n                if (i * 8 + j * 6 > binarray.length * 32) {\n                    str += this.b64pad;\n                } else {\n                    str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);\n                }\n            }\n        }\n\n        return str;\n    }\n\n    /**\n     * Get digest from nonce, date created at and salted password\n     * @param  nonce\n     * @param  created\n     * @param  salted\n     */\n    getDigest(nonce, created, salted) {\n        const mix = nonce + created + salted;\n        const sha1 = this.sha1(this.strToBin(mix), mix.length * this.chrsz);\n\n        const digest = this.binTo64(sha1);\n        return digest;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/wsse/wsse.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { MyApp } from './app.component';\n\n// Pages\nimport { ScanPage } from '../pages/scan/scan';\nimport { LoginPage } from '../pages/login/login';\nimport { ProductsPage } from '../pages/products/products';\n\n// Components\nimport { ComponentsModule } from '../components/components.module';\n\n// Plugins\nimport { NgxQRCodeModule } from 'ngx-qrcode2';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { LoginProvider } from '../providers/login/login';\n\n// Material\nimport { MatButtonModule, MatSelectModule, MatSidenavModule, MatInputModule, MatListModule } from '@angular/material';\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\n\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\nimport { VoucherProvider } from '../providers/voucher/voucher';\nimport { IonicStorageModule } from '@ionic/storage';\nimport { SyncProvider } from '../providers/sync/sync';\nimport { WsseProvider } from '../providers/wsse/wsse';\nimport { httpInterceptorProviders } from '../interceptors/index-interceptors';\n\n\n@NgModule({\n    declarations: [\n        MyApp,\n\n        // Pages\n        ScanPage,\n        ProductsPage,\n        LoginPage,\n    ],\n    imports: [\n        BrowserModule,\n        IonicModule.forRoot(MyApp),\n        NgxQRCodeModule,\n        BrowserAnimationsModule,\n        MatButtonModule,\n        MatSelectModule,\n        MatSidenavModule,\n        MatInputModule,\n        MatListModule,\n        HttpClientModule,\n        IonicStorageModule.forRoot(),\n        ComponentsModule,\n        MatProgressSpinnerModule\n    ],\n    bootstrap: [IonicApp],\n    entryComponents: [\n        MyApp,\n\n        // Pages\n        ScanPage,\n        ProductsPage,\n        LoginPage,\n    ],\n    providers: [\n        StatusBar,\n        SplashScreen,\n        { provide: ErrorHandler, useClass: IonicErrorHandler },\n        httpInterceptorProviders,\n\n        // Plugins\n        BarcodeScanner,\n        LoginProvider,\n        VoucherProvider,\n        SyncProvider,\n        WsseProvider\n    ]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { LoginPage } from '../pages/login/login';\nimport { ProductsPage } from '../pages/products/products';\nimport { Storage } from '@ionic/storage';\n\n@Component({\n    templateUrl: 'app.html'\n})\nexport class MyApp {\n    rootPage: any;\n\n    constructor(\n        platform: Platform,\n        statusBar: StatusBar,\n        splashScreen: SplashScreen,\n        private storage: Storage\n    ) {\n        platform.ready().then(() => {\n            statusBar.styleDefault();\n            this.storage.get('vendor').then(vendor => {\n                if (vendor) {\n                    this.rootPage = ProductsPage;\n                } else {\n                    this.rootPage = LoginPage;\n                }\n                splashScreen.hide();\n            });\n        });\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","export const TEXT = {\n    // GENERAL VARIABLES\n\n    // Utils\n    email: 'Email',\n    project: 'Projet',\n    rights: 'Rles',\n    \n   \n    // SPECIFIC VARIABLES\n\n    // Login\n    login_bms: 'Beneficiary management system',\n    login_forgot_password: 'Mot de passe oubli ?',\n    login_password: '*********',\n    login_title: 'Connexion',\n    login_username: 'identifiant',\n\n    // Model\n    model_countryIso3: 'Pays',\n    model_user: 'Utilisateur',\n    model_user_password: 'Mot de passe',\n    \n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/texts/global_fr.ts","export const TEXT = {\n    // GENERAL VARIABLES\n\n    // Utils\n    email: 'Email',\n    project: 'Project',\n    rights: 'Rights',\n\n\n    // SPECIFIC VARIABLES\n\n    // Login\n    login_bms: 'Beneficiary management system',\n    login_forgot_password: 'Forgot password?',\n    login_password: '*********',\n    login_title: 'login',\n    login_username: 'username',\n\n    // Model\n   \n    model_countryIso3: 'Country',\n    model_user: 'User',\n    model_user_password: 'Password',\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/texts/global_en.ts","export const TEXT = {\n    // GENERAL VARIABLES\n\n    // Utils\n    email: ' ',\n    project: '',\n    rights: '',\n    \n    // SPECIFIC VARIABLES\n\n    // Login\n    login_bms: '  ',\n    login_forgot_password: '   ',\n    login_password: ' ',\n    login_title: '    ',\n    login_username: ' ',\n\n    // Model\n    model_countryIso3: '',\n    model_user: '',\n    model_user_password: ' ',\n   };\n\n\n\n// WEBPACK FOOTER //\n// ./src/texts/global_ar.ts","export const environment = {\n    VERSION: require('../../package.json').version\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","module.exports = {\"name\":\"vendor-app\",\"version\":\"0.0.1\",\"author\":\"Ionic Framework\",\"homepage\":\"http://ionicframework.com/\",\"private\":true,\"scripts\":{\"start\":\"ionic-app-scripts serve\",\"clean\":\"ionic-app-scripts clean\",\"build\":\"ionic-app-scripts build\",\"lint\":\"ionic-app-scripts lint\"},\"dependencies\":{\"@angular/animations\":\"^5.2.11\",\"@angular/cdk\":\"^5.2.5\",\"@angular/common\":\"5.2.11\",\"@angular/compiler\":\"5.2.11\",\"@angular/compiler-cli\":\"5.2.11\",\"@angular/core\":\"5.2.11\",\"@angular/forms\":\"5.2.11\",\"@angular/http\":\"5.2.11\",\"@angular/material\":\"^5.2.5\",\"@angular/platform-browser\":\"5.2.11\",\"@angular/platform-browser-dynamic\":\"5.2.11\",\"@ionic-native/android-full-screen\":\"^4.20.0\",\"@ionic-native/barcode-scanner\":\"^4.20.0\",\"@ionic-native/core\":\"~4.18.0\",\"@ionic-native/screen-orientation\":\"^5.0.0\",\"@ionic-native/splash-screen\":\"^4.18.0\",\"@ionic-native/status-bar\":\"~4.18.0\",\"@ionic/storage\":\"^2.2.0\",\"@types/node\":\"^11.9.5\",\"cordova-android\":\"7.1.4\",\"cordova-ios\":\"4.5.5\",\"cordova-plugin-device\":\"^2.0.2\",\"cordova-plugin-fullscreen\":\"^1.2.0\",\"cordova-plugin-ionic-keyboard\":\"^2.1.3\",\"cordova-plugin-ionic-webview\":\"^2.3.3\",\"cordova-plugin-screen-orientation\":\"3.0.1\",\"cordova-plugin-splashscreen\":\"^5.0.2\",\"cordova-plugin-statusbar\":\"^2.4.2\",\"cordova-plugin-whitelist\":\"^1.3.3\",\"cordova-sqlite-storage\":\"3.0.0\",\"crypto-js\":\"^3.1.9-1\",\"es6-promise-plugin\":\"^4.2.2\",\"ionic-angular\":\"3.9.2\",\"ionicons\":\"3.0.0\",\"ngx-qrcode2\":\"0.0.9\",\"phonegap-plugin-barcodescanner\":\"8.0.1\",\"rxjs\":\"5.5.11\",\"sw-toolbox\":\"3.6.0\",\"zone.js\":\"0.8.26\"},\"devDependencies\":{\"@ionic/app-scripts\":\"^3.2.2\",\"@ionic/cli-plugin-cordova\":\"1.6.2\",\"typescript\":\"~2.6.2\"},\"description\":\"An Ionic project\",\"cordova\":{\"plugins\":{\"phonegap-plugin-barcodescanner\":{},\"cordova-plugin-whitelist\":{},\"cordova-plugin-statusbar\":{},\"cordova-plugin-device\":{},\"cordova-plugin-splashscreen\":{},\"cordova-plugin-ionic-webview\":{\"ANDROID_SUPPORT_ANNOTATIONS_VERSION\":\"27.+\"},\"cordova-plugin-ionic-keyboard\":{},\"cordova-plugin-screen-orientation\":{},\"cordova-sqlite-storage\":{},\"cordova-plugin-fullscreen\":{}},\"platforms\":[\"ios\",\"android\"]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 479\n// module chunks = 2","import { NgModule } from '@angular/core';\nimport { HeaderComponent } from './header/header';\nimport { CalculatorComponent } from './calculator/calculator';\nimport { IonicModule } from 'ionic-angular';\nimport { MatButtonModule } from '@angular/material';\n\n\n@NgModule({\n    declarations: [\n        HeaderComponent,\n        CalculatorComponent\n    ],\n    imports: [\n        IonicModule,\n        MatButtonModule\n    ],\n    exports: [\n        HeaderComponent,\n        CalculatorComponent\n    ]\n})\nexport class ComponentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Component, Input } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { NavController } from 'ionic-angular';\nimport { LoginPage } from '../../pages/login/login';\nimport { SyncProvider } from '../../providers/sync/sync';\nimport { AlertController } from 'ionic-angular';\nimport { LoadingController } from 'ionic-angular';\n\n@Component({\n    selector: 'header',\n    templateUrl: 'header.html'\n})\nexport class HeaderComponent {\n\n    @Input() title: string;\n\n    loading: any;\n\n    constructor(\n        public navCtrl: NavController,\n        private storage: Storage,\n        private syncProvider: SyncProvider,\n        private alertCtrl: AlertController,\n        public loadingController: LoadingController) {\n    }\n\n    /**\n     * Logout user\n     */\n    logout() {\n        this.storage.get('vouchers').then(vouchers => {\n            if (vouchers !== null && vouchers.length > 0) {\n                const alert = this.alertCtrl.create({\n                    title: 'Logout',\n                    subTitle: 'You need to sync your data before loging out',\n                    buttons: ['OK']\n                });\n                alert.present();\n            } else {\n                this.storage.set('vendor', null);\n                this.navCtrl.setRoot(LoginPage);\n            }\n        });\n    }\n\n    /**\n     * Sync vouchers with backend\n     */\n    sync() {\n        this.presentLoading();\n        this.storage.get('vouchers').then(vouchers => {\n            this.storage.get('deactivatedBooklets').then(booklets => {\n                if (!vouchers) {\n                    vouchers = [];\n                }\n                this.syncProvider.sync(vouchers, booklets).then(success => {\n                    this.storage.set('vouchers', []);\n                    this.loading.dismiss();\n                    const alert = this.alertCtrl.create({\n                        title: 'Sync',\n                        subTitle: 'Data has been successfully sync',\n                        buttons: ['OK']\n                    });\n                    alert.present();\n                }, error => {\n                    this.loading.dismiss();\n                    const alert = this.alertCtrl.create({\n                        title: 'Sync',\n                        subTitle: 'We were not able to sync you data, please verify your internet connection and retry.',\n                        buttons: ['OK']\n                    });\n                    alert.present();\n                });\n            });\n        });\n    }\n\n    /**\n     * Show loading information\n     */\n    async presentLoading() {\n        this.loading = await this.loadingController.create({\n            spinner: 'crescent',\n            content: '<div>Please wait...</div>'\n        });\n        return await this.loading.present();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/header/header.ts","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n    selector: 'calculator',\n    templateUrl: 'calculator.html'\n})\nexport class CalculatorComponent {\n\n    @Input() value: number;\n    @Output() valueChange = new EventEmitter<number>();\n\n    @Output() addToBasketEvent = new EventEmitter<null>();\n\n    /**\n     * Click on calculator number\n     * @param  number\n     */\n    clickOnNumber(number) {\n        if (this.value && this.value !== 0) {\n            this.value = this.value * 10 + number;\n        } else {\n            this.value = number;\n        }\n        this.valueChange.emit(this.value);\n    }\n\n    /**\n     * Delete last number clicked\n     */\n    backspace() {\n        this.value = Math.trunc(this.value / 10);\n        this.valueChange.emit(this.value);\n    }\n\n    /**\n     * Add product to basket\n     * @param  product\n     */\n    addToBasket(product) {\n        this.addToBasketEvent.emit();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/calculator/calculator.ts","import { HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { AuthInterceptor } from './auth-interceptor';\n\n/**\n * Http interceptor providers in outside-in order\n */\nexport const httpInterceptorProviders = [\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/interceptors/index-interceptors.ts","import { Injectable } from '@angular/core';\nimport { HttpEvent, HttpInterceptor, HttpHandler, HttpRequest } from '@angular/common/http';\n\nimport { WsseProvider } from '../providers/wsse/wsse';\nimport { map, concat, switchMap } from 'rxjs/operators';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n\n    constructor(\n        private _wsseService: WsseProvider\n    ) { }\n\n    /**\n\t * Intercept requests to backend to add WSSE header or user credentials (for login)\n\t * @param  req\n\t * @param  next\n\t */\n    intercept(req: HttpRequest<any>, next: HttpHandler) {\n        // Do not add headers on salt request\n        if (!/salt/.test(req.url)) {\n            let vendor;\n            // On login pass the user credentials to the wsse service\n            if (/login_app/.test(req.url)) {\n                vendor = {\n                    user: {\n                        username: req.body.username,\n                        salted_password: req.body.salted_password\n                    }\n                };\n            }\n\n            // Get the auth token from the service.\n            return this._wsseService.getHeaderValue(vendor).pipe(\n                switchMap(\n                    header => {\n                        // Clone the request & replace original headers with cloned headers, updated with the authorization.\n                        const authReq = req.clone({ setHeaders: { 'x-wsse': header } });\n                        // Send cloned request with header to the next handler.\n                        return next.handle(authReq);\n                    }\n                )\n            );\n        }\n        return next.handle(req);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/interceptors/auth-interceptor.ts","import { Component, OnInit } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { ScanPage } from '../scan/scan';\nimport { VoucherProvider } from '../../providers/voucher/voucher';\nimport { Product } from '../../model/product';\nimport { Observable } from 'rxjs';\nimport { SyncProvider } from '../../providers/sync/sync';\nimport { ChosenProduct } from '../../model/chosenProduct';\n\n@IonicPage()\n@Component({\n    selector: 'page-products',\n    templateUrl: 'products.html',\n})\nexport class ProductsPage implements OnInit {\n\n    products$: Observable<Product[]>;\n\n    public isItemSelected = false;\n    public selectedProduct: Product = null;\n    public allChosenProducts: Array<any> = [];\n\n    public typing = 'quantity';\n    public quantity: number;\n    public price: number;\n    public total = 0;\n\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        public voucherProvider: VoucherProvider,\n        private syncProvider: SyncProvider\n    ) {\n    }\n\n    /**\n     * Method executed on component creation\n     */\n    ngOnInit() {\n        this.syncProvider.getProductsFromApi();\n        this.products$ = this.syncProvider.getProducts();\n        this.products$.subscribe(products => {\n            // TODO: do something\n        });\n    }\n\n    /**\n     * Navigate to scan page\n     */\n    goToScanPage() {\n        this.voucherProvider.setPrice(this.total);\n        this.voucherProvider.setChosenProducts(this.allChosenProducts);\n        this.navCtrl.push(ScanPage);\n    }\n\n    /**\n     * Select product\n     * @param  product\n     */\n    selectProduct(product) {\n        if (product === this.selectedProduct) {\n            this.clearSelection();\n        } else {\n            this.clearSelection();\n            this.isItemSelected = true;\n            this.selectedProduct = product;\n        }\n    }\n\n    /**\n     * Create short animation for right-hand drawer\n     * @param  drawer\n     */\n    animateDrawer(drawer) {\n        drawer.close();\n        setTimeout(() => {\n            drawer.open();\n        }, 300);\n    }\n\n    /**\n     * Add product to basket\n     */\n    addToBasket() {\n        if (this.quantity && this.price) {\n            this.allChosenProducts.push({\n                product: this.selectedProduct,\n                quantity: this.quantity,\n                price: this.price,\n                subTotal: this.price * this.quantity\n            });\n            this.total = 0;\n            this.allChosenProducts.forEach(element => {\n                this.total += element.subTotal;\n            });\n        }\n        this.clearSelection();\n    }\n\n    /**\n     * Clear selected product\n     */\n    clearSelection() {\n        this.isItemSelected = false;\n        this.selectedProduct = null;\n        this.typing = 'quantity';\n        this.quantity = null;\n        this.price = null;\n    }\n\n    /**\n     * Clear selected products (basket)\n     */\n    clearItemList() {\n        this.allChosenProducts = [];\n        this.total = 0;\n    }\n\n    /**\n     * Remove a product from the cart\n     */\n    removeFromCart(item: ChosenProduct) {\n        this.allChosenProducts = this.allChosenProducts.filter((product, index, array) => {\n            return product !== item;\n        });\n        this.total = this.total - item.subTotal;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/products/products.ts"],"sourceRoot":""}
